<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Activision </title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="mraid.js"></script>
    <script language="javascript" type="text/javascript">
    	//inserted here
		var creative_type_id = '{[creative_type_id]}';
		var campaign_id = '{[campaign_id]}';
		var creative_id = '{[creative_id]}';
		var location_id = '{[location_id]}';
		var ad_type = '{[ad_type]}';
		var mraid_ad_id = '{[mraid_ad_id]}';
		var strStatsUrl = "{[statsUrl]}";
		var os = "{[os]}";
		var is_tablet = "{[is_tablet]}";
                
                	
function saveStats(query, urlRedirect) {
    query = (typeof query == 'undefined') ? '' : query;
    urlRedirect = (typeof urlRedirect == 'undefined') ? '' : urlRedirect;
    iHttp.async = true;
    redirectMade = false;

    try {
        iHttp.call(strStatsUrl + query);
        iHttp.request.timeout = 4000;
        iHttp.request.onreadystatechange = function() {

            if (iHttp.request.readyState == 4) {
                clearTimeout(callAbortTimeout);
                if (urlRedirect) {
                    if (!redirectMade) {
                        if (_os == 'WINDOWS') {
                            window.external.notify(urlRedirect);
                        } else {
                            document.location = urlRedirect;
                        }
                        redirectMade = true;
                    }
                }
            }
        }
    } catch (e) {
        //console.log(e);
    }

    callAbortTimeout = setTimeout(function() {
        if (urlRedirect) {
            if (!redirectMade) {
                if (_os == 'WINDOWS') {
                    window.external.notify(urlRedirect);
                } else {
                    document.location = urlRedirect;
                }
                redirectMade = true;
            }
        }
    }, 4000);
}
var iHttp = {
    iReq: function() {
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest()
        } else {
            if (window.ActiveXObject) {
                return new ActiveXObject("Microsoft.XMLHTTP")
            }
        }
        return false
    },
    async: false,
    call: function(a) {
        this.request = this.iReq();
        if (this.request) {
            this.request.open("GET", a, this.async);
            this.request.send()
        }
    },
    post: function(a, b) {
        this.request = this.iReq();
        if (this.request) {
            this.request.open("POST", a, this.async);
            this.request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            this.request.send(b)
        }
    }
};

var call_client = function(creative_id, event_name) {
    var event_type = 'GLADS_';
    if (typeof event_name == 'undefined') {
        event_name = "impression";
        event_type += 'SHOW_';
    } else {
        event_type += event_name.toUpperCase() + '_';
    }
    if (typeof ad_type == 'undefined') {
        ad_type = 'INTERSTITIAL';
    }

    event_type += ad_type.toUpperCase();

    // event IN ("impression","click","action_complete")
    statsParams = "&event=" + event_name + "&event_type=" + event_type + "&creative_id=" + creative_id;

    saveStats(statsParams);
};

var readyStateCheckIntervalCallClient = setInterval(function() {
    if (document.readyState === "complete") {
        console.log('running readyState');
        clearInterval(readyStateCheckIntervalCallClient);
        call_client(creative_id);
    }
}, 10);

        // for impression:  call_client(5462) 
        // for click:       call_client(5462, 'click')
    </script>
    {[controllerJS]}
<link rel="stylesheet" href="http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders4/mobile_android_v1/landscape/css/normalize.css" media="all"/>
<link rel="stylesheet" href="http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders4/mobile_android_v1/landscape/css/style.css" media="all"/>
<script src="http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders4/mobile_android_v1/landscape/js/createmraid.js"></script>
<!--[if lt IE 9]> <script src="js/css3-mediaqueries.js"></script> <![endif]-->

<style>
    .loading_anim {
        font-size: 1.08em;
        width: 1.08em;
        height: 1.08em;
        top: 50%;
        left: 50%;
        margin-left: -0.54em;
        margin-top: -0.54em;
        border-radius: 50%;
        position: absolute;
        text-indent: -9999em;
        -webkit-animation: load5 1.1s infinite ease;
        animation: load5 1.1s infinite ease;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
  }
  @-webkit-keyframes load5 {
    0%,
    100% {
      box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);
    }
    12.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);
    }
    25% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    37.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    50% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    62.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    75% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    87.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;
    }
  }
  @keyframes load5 {
    0%,
    100% {
      box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);
    }
    12.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);
    }
    25% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    37.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    50% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    62.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    75% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
    }
    87.5% {
      box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;
    }
  }
</style>
</head>
<body>
<div id="mraidContainer" class="mraid">
<div class="loading_anim"></div>
<div style="position: absolute;top: 1em;left: 1em;color: white;font-size: 1em;z-index: 999999;">Advertisement</div>
<section id="main-container" class="main-container">
	<!--<header></header>-->
	<section id="main-wrapper" class="">
		<!--interstitial-->
        <div id="interstitial">
            <div class="bp-ab frame1-holder">
                <div class="bp-ab copy1"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/copy1.png" width="834" height="67" alt="" title=""></div>		
				<div class="bp-ab logo"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/logo.png" width="639" height="296" alt="" title=""></div>
				<div class="bp-ab products"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/products.png" width="528" height="287" alt="" title=""></div>
				<div class="bp-ab product_text"><img src="http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders/mobile/landscape/images/product_text2.png" width="379" height="65" alt="" title=""></div>
				<div class="bp-ab cta"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/cta.png" width="478" height="72" alt="" title=""></div>
				<div class="bp-ab others"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/others.png" width="1026" height="51" alt="" title=""></div>
			</div>
			
			<div class="bp-ab frame2-holder">
				<div class="bp-ab char1"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char1.png" width="382" height="374" alt="" title=""></div>
				<div class="bp-ab char2"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char2.png" width="267" height="248" alt="" title=""></div>
				<div class="bp-ab char3"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char3.png" width="419" height="270" alt="" title=""></div>
				<div class="bp-ab char4"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char4.png" width="655" height="293" alt="" title=""></div>
				<div class="bp-ab char5"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char5.png" width="394" height="352" alt="" title=""></div>
				<div class="bp-ab char6"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/char6.png" width="340" height="281" alt="" title=""></div>
				<div class="bp-ab copy2"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/copy2.png" width="351" height="77" alt="" title=""></div>
				<div class="bp-ab copy4"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/copy4.png" width="420" height="67" alt="" title=""></div>
				<div class="bp-ab copy3"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/copy3.png" width="263" height="59" alt="" title=""></div>
			</div>
			<!--close-btn-->
            <div class="bp-ab close-btn"><img src="http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/close_btn.png" width="103" height="107" alt="" title=""></div>
        </div>
	</section>
	<!--<div id="ad-guide"></div>-->
</section>
</div>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
<!--<script src="http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders4/mobile_android_v1/landscape/js/index.js" type="text/javascript"></script>-->
<script type="text/javascript">
/* VARIABLES */
var testEnv = false; // should always be false for mraid environment
if(!window.mraid)
{
    testEnv = true;
}

/* AD SETTING BEGIN */
var gl = {};
gl.setting = {
	dir: "http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders4/mobile_android_v1/landscape/",
	scriptReady: false,
	jQueryOn: true,
	pluginOn: false,
	swiperOn: false,
	threesixtyOn: false,
	youtubeOn: false,
	gsapOn: false
};

var navU = navigator.userAgent;
var isAndroidMobile = navU.indexOf('Android') > -1 && navU.indexOf('Mozilla/5.0') > -1 && navU.indexOf('AppleWebKit') > -1;
var regExAppleWebKit = new RegExp(/AppleWebKit\/([\d.]+)/);
var resultAppleWebKitRegEx = regExAppleWebKit.exec(navU);
var appleWebKitVersion = (resultAppleWebKitRegEx === null ? null : parseFloat(regExAppleWebKit.exec(navU)[1]));
var isAndroidBrowser = appleWebKitVersion < 537;
var androidChecker = isAndroidMobile || isAndroidBrowser;
var isMobile = {
	Android: function() {return androidChecker;},
	BlackBerry: function() {return navigator.userAgent.match(/BlackBerry/i);},
	iOS: function() {return navigator.userAgent.match(/iPhone|iPad|iPod/i);},
	Opera: function() {return navigator.userAgent.match(/Opera Mini/i);},
	Windows: function() {return navigator.userAgent.match(/IEMobile/i);},
	any: function() {return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());}
};
var timeStamp = (new Date).getTime();

// TRACKINGS SET 1 //
if (isMobile.Android()) {
    //android
	gl.trackings = {
		pixel:"http://ads.mediasmart.es/external/impression/a4c7ed8cupd5cdi?creativeId=cr-ex-qa1a9ww42uo9a4i&publisher=GAMELOFT-RESEAU-int-buckle-sph-and&keywords=k:os:android,p:devicetype:phone,p:type:app&cb=" + timeStamp,
		click: "http://ads.mediasmart.es/external/click/a4c7ed8cupd5cdi?creativeId=cr-ex-qa1a9ww42uo9a4i&publisher=GAMELOFT-RESEAU-int-buckle-sph-and&keywords=k:os:android,p:devicetype:phone,p:type:app&r=https%3A%2F%2Fyoutu.be%2FLRYSZlyA9o8"
	};
}else{
    //iOs
	gl.trackings = {
		pixel:"http://ads.mediasmart.es/external/impression/a4c7ed8cupd5cdi?creativeId=cr-ex-qa1a9ww42uo9a4i&publisher=GAMELOFT-RESEAU-int-buckle-sph-ios&keywords=k:os:iphone,p:devicetype:phone,p:type:app&cb=" + timeStamp,
		click: "http://ads.mediasmart.es/external/click/a4c7ed8cupd5cdi?creativeId=cr-ex-qa1a9ww42uo9a4i&publisher=GAMELOFT-RESEAU-int-buckle-sph-ios&keywords=k:os:iphone,p:devicetype:phone,p:type:app&r=https%3A%2F%2Fyoutu.be%2FLRYSZlyA9o8"
	};
}

gl.features = {
	JSplugin: false,
	loadPlugins: function(){
		if (!gl.features.JSplugin) {
			var locSrc1 = gl.setting.dir + 'js/plugins.js';
			var pluginJS = document.createElement('script');
			pluginJS.setAttribute('type', 'text/javascript');
			pluginJS.setAttribute('src', locSrc1);
			document.body.appendChild(pluginJS);
			gl.features.JSplugin = true;
		}
		console.log("---- CONSOLE PLUGIN READY ----");
	},
	JSswiper: false,
	loadSwiper: function(){
		if (typeof(window.Swiper) == "undefined"){
			if (!gl.features.JSswiper) {
				var locSrc2 = gl.setting.dir + 'js/swiper.js';
				var swiperJS = document.createElement('script');
				swiperJS.setAttribute('type', 'text/javascript');
				swiperJS.setAttribute('src', locSrc2);
				document.body.appendChild(swiperJS);
				gl.features.JSswiper = true;
			}
			setTimeout(function() { gl.features.loadSwiper(); }, 50);
		} else {
			console.log("---- SWIPER READY ----");
		}
	},
	JS360: false,
	load360: function(){
		if (typeof($.ThreeSixty) == "undefined"){
			if (!gl.features.JS360) {
				var locSrc3 = gl.setting.dir + 'js/threesixty.js';
				var threesixtyJS = document.createElement('script');
				threesixtyJS.setAttribute('type', 'text/javascript');
				threesixtyJS.setAttribute('src', locSrc3);
				document.body.appendChild(threesixtyJS);
				gl.features.JS360 = true;
			}
			setTimeout(function() { gl.features.load360(); }, 50);
		} else {
			console.log("---- 360 READY ----");
		}
	},
	JSyt: false,
	loadYT: function(){
		if (!gl.features.JSyt) {
			var tag = document.createElement('script');
			tag.src = "https://www.youtube.com/iframe_api";
			var firstScriptTag = document.getElementsByTagName('script')[0];
			firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
			gl.features.JSyt = true;
		} else {
			console.log("---- YOUTUBE API READY ----");
		}
	},
	JSgsap: false,
	loadGSAP: function(){
		if (!gl.features.JSgsap) {
			var locSrc4 = "http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js";
			var gsapJS = document.createElement('script');
			gsapJS.setAttribute('type', 'text/javascript');
			gsapJS.setAttribute('src', locSrc4);
			document.body.appendChild(gsapJS);
			gl.features.JSgsap = true;
		}
		console.log("---- GSAP READY ----");
	},
	JSjQuery: false,
    loadJQuery: function() {
		if (typeof(jQuery) == "undefined") {
			if (!gl.features.JSjQuery) {
				var locSrc = 'https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js';
				var jquery = document.createElement('script');
				jquery.setAttribute('type', 'text/javascript');
				jquery.setAttribute('src', locSrc);
				document.body.appendChild(jquery);
				gl.features.JSjQuery = true;
			}
			setTimeout(function() { gl.features.loadJQuery(); }, 50);
		} else {
			if (gl.setting.pluginOn) { gl.features.loadPlugins(); }
			if (gl.setting.gsapOn) { gl.features.loadGSAP(); }
			if (gl.setting.swiperOn) { gl.features.loadSwiper(); }
			if (gl.setting.threesixtyOn) { gl.features.load360(); }
			//if (gl.setting.youtubeOn) { gl.features.loadYT(); }
			gl.setting.scriptReady = true;
		}
    }
};

gl.ad = {
	initScript: function(){
		if (gl.setting.jQueryOn) {
			gl.features.loadJQuery();
		} else {
			gl.setting.scriptReady = true;
		}
	}
};
/* AD SETTING END */

/* ------------------------------------------ AD CONFIG ------------------------------------------ */
var glmnl = {};
glmnl.config = {
	imgPath: "http://igp06.gameloft.com/igp/skylanders2/mobile/landscape/images/", //URL PATH
	blocker: false,
	expandURL: gl.setting.dir + "index_expand.html"
};
/* PRELOADER */
function displayAd(){
    document.getElementById("mraidContainer").style.display = "block";
    gl.app.initAdComplete();
    setTimeout(function(){
        $(".loading_anim").remove();
    },1000);
}

var images, imagesLoaded = 0, isReadytoExpand = true;
console.log(glmnl.config.imgPath);
function imagesLoading(){
    images = new Array(
		glmnl.config.imgPath + "bg1.jpg",
		glmnl.config.imgPath + "bg2.jpg",
		glmnl.config.imgPath + "char1.png",
		glmnl.config.imgPath + "char2.png",
		glmnl.config.imgPath + "char3.png",
		glmnl.config.imgPath + "char4.png",
		glmnl.config.imgPath + "char5.png",
		glmnl.config.imgPath + "char6.png",
		glmnl.config.imgPath + "copy1.png",
		glmnl.config.imgPath + "copy2.png",
		glmnl.config.imgPath + "copy3.png",
		glmnl.config.imgPath + "copy4.png",
		glmnl.config.imgPath + "logo.png",
		glmnl.config.imgPath + "products.png",
		"http://facebookapps.gameloft.com/mnl-test-proj/test-proj/skylanders/mobile/landscape/images/product_text2.png",
		glmnl.config.imgPath + "cta.png",
		glmnl.config.imgPath + "others.png" 
	);
    for(var i=0; i<=images.length-1; i++){
		imgLoader(images[i]);
    }
}

function addListener(element, type, expression, bubbling){
	bubbling = bubbling || false;
	if(window.addEventListener)    { // Standard
		element.addEventListener(type, expression, bubbling);
		return true;
	} else if(window.attachEvent) { // IE
		element.attachEvent('on' + type, expression);
		return true;
	} else return false;
}

function imgLoader(imageURL){
	var imgEl = document.createElement('img');
	var url = imageURL;
	addListener(imgEl, 'load', function(e){
            imagesLoaded++;
            if (images.length === imagesLoaded) {
                    displayAd();
            }    
	}, false);
	imgEl.src=url;
}

/* ------------------------------------------ CUSTOM JS HERE ------------------------------------------ */
gl.app = {
	initAd: function (){
		var appInterval = setInterval(function(){
			if (!gl.setting.scriptReady) {
				console.log("SCRIPT NOT YET READY");		
			} else if (gl.setting.scriptReady){
				console.log("PRELOAD IMAGES");
				imagesLoading();
				clearInterval(appInterval);	
			}
		},100);
		if (gl.trackings.pixel !== "") {
			var b = document.getElementById("main-container");
			var a = document.createElement("img");
			a.src = gl.trackings.pixel;
			a.style.position = "absolute";
			a.style.display = "none";
			a.border = 0;
			b.appendChild(a);
		}
	},
	initAdComplete: function(){
		customScript();
	}
}

function customScript(){
	TweenMax.set(".copy1", {z:0.1});
	TweenMax.set(".copy2", {z:0.1});
	TweenMax.set(".copy3", {z:0.1});
	TweenMax.set(".copy4", {z:0.1});
	TweenMax.set(".char1", {z:0.1});
	TweenMax.set(".char2", {z:0.1});
	TweenMax.set(".char3", {z:0.1});
	TweenMax.set(".char4", {z:0.1});
	TweenMax.set(".char5", {z:0.1});
	TweenMax.set(".char6", {z:0.1});
	TweenMax.set(".logo", {z:0.1});
	TweenMax.set(".frame2-holder", {z:0.1});
	
	function anim4(){
		TweenMax.to(".frame2-holder", 1, { opacity: 0, delay: 1 })
		TweenMax.to(".logo", 1.5, { y: "12%", ease: Bounce.easeOut, delay: 2 })
		TweenMax.to(".products", 1, { opacity: 1, delay: 4 })
		TweenMax.to(".product_text", 1, { opacity: 1, delay: 4 })
		TweenMax.to(".cta", 1, { scale: 1, opacity: 1, ease: Elastic.easeOut.config(5, 5), delay: 4.5 })
		TweenMax.to(".others", 1, { opacity: 1,  delay: 4.5 })
	}
	
	function anim3(){
		TweenMax.to(".copy2", 1, { x: "21%", y: "-220%", ease: Elastic.easeOut.config(1, 0.5), delay: 1 })
		TweenMax.to(".copy3", 1, { scale: 1, ease: Elastic.easeOut.config(1, 0.5), delay: 1.2, onComplete: anim4 })
        TweenMax.to(".copy4", 1, { x: "-17%", y: "-43%", ease: Elastic.easeOut.config(1, 0.5), delay: 1 })
	}
	
	function anim2(){
		TweenMax.to(".frame2-holder", 1, { opacity: 1 })
		TweenMax.to(".char1", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 0.5 })
		TweenMax.to(".char4", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 0.5 })
		TweenMax.to(".char2", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 1 })
		TweenMax.to(".char5", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 1 })
		TweenMax.to(".char3", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 1.5 })
		TweenMax.to(".char6", 2, { scale: 1, ease: Elastic.easeOut.config(5, 5), delay: 1.5 })
		TweenMax.to(".copy1", 1, { opacity: 0, onComplete: anim3 })
	}
	function anim1(){
		TweenMax.to(".copy1", 1, { x:"-50%", y: "-50%", ease: Elastic.easeOut.config(1, 1), onComplete: anim2 })
	}
	
	function colAnim() {
		setTimeout(anim1,600);
	}
	
	function ctaClick(e){

		e.preventDefault();
		if (testEnv) {
			
		} else {
			call_client(creative_id, 'click');
			mraid.open(gl.trackings.click);
                        window.onPause= function()
                        {
                            mraid.close();
                        };
                        window.onPauseActive = function()
                        {
                            mraid.close();
                        };
		}
		e.stopPropagation();
	}
	
	function initAnim() {
            //document.getElementById("main-wrapper").addEventListener("click", ctaClick, false);
            document.body.addEventListener("click",ctaClick);
            setTimeout(colAnim,200);
	}
	
	setTimeout(initAnim, 100);
	
	function resize() {
		var windowWidth = $(window).width();
		var windowHeight = $(window).height();
		//////STICKY FOOTER
		$('#main-container').css({height: windowHeight});
	}
	
	$(window).resize(function() {
		resize();
	});
	$(document).ready(function() {
		resize();
	});
	$(window).load(function() {
		resize();
	});
}

/* ------------------------------------------ MRAID READY EVENTS ------------------------------------------ */
function initMraidScript() {
	if(mraid.getState() == 'loading'){
		mraid.addEventListener("ready", gl.app.initAd);
		mraid.setOrientationProperties({"allowOrientationChange":false, "forceOrientation":"landscape"});
		console.log("LOADING MRAID");
	} else {
		gl.app.initAd();
		mraid.setOrientationProperties({"allowOrientationChange":false, "forceOrientation":"landscape"});
		console.log("DEFAULT MRAID");
	}
	if(!mraid.isViewable())
	{
	  console.log('Adview is not visible'); //Don't die from this error, just a notice
	}
	mraid.addEventListener('stateChange', myState);
}
/* ------------------------------------------  COLLAPSE and EXPAND HANDLER WITH MRAID SCRIPT ------------------------------------------ */
function myState(state){
	if (state == "expanded") {

	} else if (state == "default") { 

	}
}
/* DOCUMENT READY */
if (document.readyState == "complete") {
	if(testEnv){ gl.app.initAd(); } else { initMraidScript(); }
} else {
	if(testEnv){ gl.app.initAd(); } else { window.addEventListener('load', initMraidScript, false); }
}

window.onload = gl.ad.initScript();
window.addEventListener("touchmove", function(e){ e.preventDefault(); }, false);
</script>
</body>
</html>